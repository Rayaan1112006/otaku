<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OtakuLog</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: #0b0b0b;
    color: white;
    display: flex;
}

/* SIDEBAR */
.sidebar {
    width: 220px;
    background: #111;
    height: 100vh;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.sidebar h2 {
    text-align: center;
    color: crimson;
}

.sidebar button {
    background: none;
    border: none;
    color: white;
    padding: 10px;
    text-align: left;
    cursor: pointer;
    font-size: 15px;
}

.sidebar button.active,
.sidebar button:hover {
    background: crimson;
}

/* MAIN */
.main {
    flex: 1;
    overflow-y: auto;
    padding: 30px;
    animation: fadeIn 0.4s ease;
}

section { display: none; }
section.active { display: block; }

/* SEARCH */
.search-center {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.search-center input {
    padding: 12px;
    width: 320px;
    background: #1a1a1a;
    border: none;
    color: white;
    font-size: 15px;
    border-radius: 6px;
}

/* SUGGESTED */
.suggested {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
}

.suggested span {
    background: #222;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 13px;
    cursor: pointer;
}

.suggested span:hover {
    background: crimson;
}

/* GRID */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 18px;
    margin-top: 25px;
}

/* CARD */
.card {
    background: #1a1a1a;
    border-radius: 10px;
    overflow: hidden;
    text-align: center;
    animation: slideUp 0.4s ease;
    transition: transform 0.3s;
}

.card:hover {
    transform: translateY(-6px);
}

.card img {
    width: 100%;
    height: 250px;
    object-fit: cover;
}

.card p {
    font-size: 14px;
    padding: 6px;
}

/* ICONS */
.icon {
    width: 38px;
    height: 38px;
    margin: 4px;
    border: none;
    border-radius: 50%;
    background: crimson;
    color: white;
    font-size: 18px;
    cursor: pointer;
}

/* FOOTER */
footer {
    margin-top: 60px;
    padding: 25px;
    background: #111;
    text-align: center;
    font-size: 14px;
    color: #ccc;
}

footer h3 {
    color: white;
    margin-bottom: 5px;
}

/* ANIMATIONS */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h2>OtakuLog</h2>
    <button class="active" onclick="switchPage('anime', this)">Anime</button>
    <button onclick="switchPage('discover', this)">Discover</button>
    <button onclick="switchPage('suggestions', this)">Suggestions</button>
    <button onclick="switchPage('manga', this)">Manga</button>
    <button onclick="switchPage('news', this)">News</button>
</div>

<!-- MAIN -->
<div class="main">

<!-- ANIME -->
<section id="anime" class="active">
    <div class="search-center">
        <input id="animeSearchInput" placeholder="Search anime...">
        <button class="icon" onclick="searchAnime()">üîç</button>

        <div class="suggested">
            <span onclick="quickSearch('Naruto')">Naruto</span>
            <span onclick="quickSearch('Attack on Titan')">Attack on Titan</span>
            <span onclick="quickSearch('One Piece')">One Piece</span>
            <span onclick="quickSearch('Death Note')">Death Note</span>
            <span onclick="quickSearch('Demon Slayer')">Demon Slayer</span>
        </div>
    </div>

    <div id="animeResults" class="grid"></div>

    <h2>Watched</h2>
    <div id="watchedGrid" class="grid"></div>

    <h2>Watchlist</h2>
    <div id="watchlistGrid" class="grid"></div>
</section>

<!-- DISCOVER -->
<section id="discover">
    <h2>Top Anime</h2>
    <div id="topAnimeGrid" class="grid"></div>
</section>

<!-- SUGGESTIONS -->
<section id="suggestions">
    <h2>Recommended For You</h2>
    <div id="recommendGrid" class="grid"></div>
</section>

<!-- MANGA -->
<section id="manga">
    <h2>Manga Dashboard</h2>
    <input id="mangaSearchInput" placeholder="Search manga...">
    <button class="icon" onclick="searchManga()">üîç</button>
    <div id="mangaResults" class="grid"></div>
</section>

<!-- NEWS -->
<section id="news">
    <h2>Upcoming Anime</h2>
    <div id="upcomingGrid" class="grid"></div>

    <h2>Currently Airing</h2>
    <div id="airingGrid" class="grid"></div>
</section>

<!-- FOOTER -->
<footer>
    <h3>About</h3>
    <p>OtakuLog is a personal anime & manga tracking website.</p>
    <p><strong>Author:</strong> Rayaan K</p>
    <p><strong>Email:</strong> rayaan.3016@gmail.com</p>
</footer>

</div>

<script>
let animeResultsData = [];
let watchedList = JSON.parse(localStorage.getItem("watched")) || [];
let watchlistList = JSON.parse(localStorage.getItem("watchlist")) || [];

function switchPage(id, btn) {
    document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    document.querySelectorAll(".sidebar button").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
}

function quickSearch(name) {
    animeSearchInput.value = name;
    searchAnime();
}

async function searchAnime() {
    const q = animeSearchInput.value.trim();
    if (!q) return;

    const res = await fetch(`https://api.jikan.moe/v4/anime?q=${q}&limit=12`);
    const data = await res.json();
    animeResultsData = data.data;
    animeResults.innerHTML = animeResultsData.map((a,i)=>`
        <div class="card">
            <img src="${a.images.jpg.image_url}">
            <p>${a.title}</p>
            <button class="icon" onclick="addWatched(${i})">‚úî</button>
            <button class="icon" onclick="addWatchlist(${i})">‚ûï</button>
        </div>`).join("");
}

function addWatched(i){
    const a = animeResultsData[i];
    if(!watchedList.find(x=>x.mal_id===a.mal_id)){
        watchedList.push(a);
        save();
    }
}

function addWatchlist(i){
    const a = animeResultsData[i];
    if(!watchlistList.find(x=>x.mal_id===a.mal_id)){
        watchlistList.push(a);
        save();
    }
}

function save(){
    localStorage.setItem("watched",JSON.stringify(watchedList));
    localStorage.setItem("watchlist",JSON.stringify(watchlistList));
    watchedGrid.innerHTML = watchedList.map(simple).join("");
    watchlistGrid.innerHTML = watchlistList.map(simple).join("");
}

function simple(a){
    return `<div class="card"><img src="${a.images.jpg.image_url}"><p>${a.title}</p></div>`;
}

save();
</script>

</body>
</html>
