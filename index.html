<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OtakuLog - Anime & Manga Tracker</title>
    
    <style>
        *{box-sizing:border-box}
        html {
  height: 100vh;
  overflow-y: auto;
  overflow-x: hidden;
}

body {
  margin: 0;
  min-height: 100vh;
  /* Keep all other body styles unchanged */
  overflow-x: hidden;
}

    

        /* ================= FIXED BACKGROUND ================= */
        .bg-animation{
            position:fixed;top:0;left:0;width:100%;height:100%;z-index:-2;
            background:radial-gradient(circle at 20% 80%, rgba(120,119,198,0.3) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255,119,198,0.3) 0%, transparent 50%),
                        radial-gradient(circle at 40% 40%, rgba(120,219,255,0.2) 0%, transparent 50%),
                        linear-gradient(135deg, #0c0c1a 0%, #1a0a2e 50%, #0b0b0b 100%);
            animation:bgShift 20s ease-in-out infinite alternate;
        }
        @keyframes bgShift{0%{background-position:0% 50%,100% 50%,50% 0%,0% 0%}100%{background-position:100% 50%,0% 50%,50% 100%,100% 100%}}

        /* ================= SIDEBAR ================= */
        .sidebar{
            width:260px;background:linear-gradient(180deg,rgba(15,15,15,0.95),rgba(25,25,25,0.9));
            backdrop-filter:blur(20px);padding:25px 20px;display:flex;flex-direction:column;gap:12px;
            box-shadow:5px 0 30px rgba(220,20,60,0.1);border-right:1px solid rgba(220,20,60,0.2);z-index:10;
            overflow-y:auto;
        }
        .sidebar h2{color:#ff416c;text-align:center;margin:0 0 20px 0;font-size:24px;font-weight:700;letter-spacing:2px;text-shadow:0 0 10px rgba(255,65,108,0.5);}
        .profile-mini{background:linear-gradient(145deg,rgba(22,22,22,0.8),rgba(35,35,35,0.8));backdrop-filter:blur(15px);border-radius:16px;padding:16px;text-align:center;border:1px solid rgba(255,65,108,0.2);transition:all 0.3s ease;}
        .profile-mini:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(255,65,108,0.2);}
        .profile-mini .avatar{font-size:36px;}
        .profile-mini h4{margin:8px 0 0;font-size:15px;}
        .profile-mini button{margin-top:8px;background:none;border:none;color:#ff416c;cursor:pointer;font-size:13px;font-weight:500;transition:0.3s;}
        .profile-mini button:hover{color:#ff6b9d;}

        .sidebar button{
            background:none;border:none;color:#fff;padding:14px 16px;text-align:left;cursor:pointer;border-radius:12px;font-size:15px;font-weight:500;transition:all 0.3s ease;position:relative;overflow:hidden;
        }
        .sidebar button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,65,108,0.2),transparent);transition:0.5s;}
        .sidebar button:hover::before{left:100%;}
        .sidebar button.active,.sidebar button:hover{background:linear-gradient(135deg,#ff416c,#ff4b6d);box-shadow:0 5px 20px rgba(255,65,108,0.4);transform:translateX(5px);}
        .sidebar button.active::after{content:'â—';position:absolute;right:12px;top:50%;transform:translateY(-50%);width:8px;height:8px;background:#fff;border-radius:50%;}

        /* ================= MAIN CONTENT - FIXED SCROLL ================= */
        .main{flex:1;display:flex;flex-direction:column;overflow:hidden;}
        .main-header{padding:20px 35px;background:rgba(15,15,15,0.8);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,65,108,0.2);position:sticky;top:0;z-index:5;}
        .content-area{flex:1;overflow-y:auto;padding:35px;}
        section{display:none;}
        section.active{display:block;}
        /* ================= ABOUT SECTION ================= */
        .about-content{max-width:900px;margin:0 auto;}
        .about-card{background:linear-gradient(145deg,rgba(22,22,22,0.9),rgba(35,35,35,0.9));padding:30px;border-radius:20px;margin:30px 0;border:1px solid rgba(255,65,108,0.2);}
        .feature-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;}
        .feature-card{padding:20px;border-radius:15px;background:rgba(255,65,108,0.1);border:1px solid rgba(255,65,108,0.3);transition:all 0.3s ease;}
        .feature-card:hover{transform:translateY(-5px);background:rgba(255,65,108,0.2);}
        /* ================= HOME PAGE ================= */
        #home{background:linear-gradient(135deg,rgba(0,0,0,0.7),rgba(10,10,10,0.9));min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;position:relative;}
        #home::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent 48%,rgba(255,65,108,0.03) 50%,transparent 52%);animation:shimmer 3s linear infinite;}
        @keyframes shimmer{0%{transform:translateX(-100%) skewX(-15deg);}100%{transform:translateX(300%) skewX(-15deg);}}
        #home h1{font-size:52px;letter-spacing:3px;margin:0 0 20px 0;background:linear-gradient(135deg,#ff416c,#ff4b6d,#ff6b9d);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:0 0 30px rgba(255,65,108,0.5);animation:glow 2s ease-in-out infinite alternate;}
        @keyframes glow{0%{text-shadow:0 0 20px rgba(255,65,108,0.5);}100%{text-shadow:0 0 40px rgba(255,65,108,0.8),0 0 60px rgba(255,65,108,0.3);}}
        #home p{max-width:650px;color:#ddd;margin-bottom:40px;font-size:16px;line-height:1.6;}
        .home-buttons{display:flex;gap:25px;flex-wrap:wrap;justify-content:center;}
        .home-buttons button{padding:18px 45px;font-size:17px;font-weight:600;background:linear-gradient(135deg,#ff416c,#ff4b6d);border:none;border-radius:50px;color:white;cursor:pointer;transition:all 0.4s ease;box-shadow:0 10px 30px rgba(255,65,108,0.4);position:relative;overflow:hidden;}
        .home-buttons button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);transition:0.5s;}
        .home-buttons button:hover::before{left:100%;}
        .home-buttons button:hover{transform:translateY(-5px) scale(1.05);box-shadow:0 20px 50px rgba(255,65,108,0.6);}

        /* ================= SEARCH & COMMON ELEMENTS ================= */
        .search-center{display:flex;flex-direction:column;align-items:center;gap:15px;}
        .search-center input{width:400px;padding:16px 20px;background:linear-gradient(145deg,rgba(26,26,26,0.8),rgba(40,40,40,0.8));border:2px solid rgba(255,65,108,0.2);color:white;border-radius:12px;font-size:16px;backdrop-filter:blur(15px);transition:all 0.3s ease;}
        .search-center input:focus{outline:none;border-color:#ff416c;box-shadow:0 0 0 4px rgba(255,65,108,0.2);}
        .search-center .icon{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#ff416c,#ff4b6d);border:none;color:white;cursor:pointer;font-size:18px;transition:all 0.3s ease;}
        .search-center .icon:hover{transform:scale(1.1) rotate(10deg);box-shadow:0 10px 30px rgba(255,65,108,0.5);}

        .suggested{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:15px;}
        .suggested span{background:linear-gradient(145deg,rgba(34,34,34,0.8),rgba(50,50,50,0.8));padding:10px 20px;border-radius:25px;font-size:14px;cursor:pointer;font-weight:500;backdrop-filter:blur(10px);border:1px solid rgba(255,65,108,0.2);transition:all 0.3s ease;}
        .suggested span:hover{background:linear-gradient(135deg,#ff416c,#ff4b6d);transform:translateY(-3px);box-shadow:0 10px 25px rgba(255,65,108,0.4);border-color:rgba(255,255,255,0.3);}

        /* ================= GRID & CARDS ================= */
        .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;margin-top:30px;}
        h3{margin:40px 0 20px 0;font-size:24px;color:#ff416c;font-weight:700;letter-spacing:1px;}
        h2{font-size:28px;color:#ff416c;font-weight:700;margin:0 0 20px 0;text-align:center;}
        
        .card{background:linear-gradient(145deg,rgba(22,22,22,0.9),rgba(35,35,35,0.9));border-radius:20px;overflow:hidden;padding-bottom:15px;position:relative;backdrop-filter:blur(15px);border:1px solid rgba(255,65,108,0.15);transition:all 0.4s cubic-bezier(0.175,0.885,0.32,1.275);transform:translateY(0);}
        .card:hover{transform:translateY(-15px) scale(1.02);box-shadow:0 30px 60px rgba(255,65,108,0.3);border-color:rgba(255,65,108,0.4);}
        .card img{width:100%;height:280px;object-fit:cover;transition:all 0.4s ease;}
        .card:hover img{transform:scale(1.05);}
        .card h4{margin:15px 15px 10px;font-size:16px;font-weight:600;line-height:1.3;}
        .card p{font-size:13px;color:#ccc;padding:0 15px;max-height:75px;overflow:hidden;line-height:1.5;}
        
        /* ================= BUTTONS ================= */
        .buttons{display:flex;justify-content:center;gap:8px;margin-top:12px;padding:0 10px;}
        .icon{width:42px;height:42px;border-radius:50%;border:none;background:linear-gradient(135deg,#ff416c,#ff4b6d);color:white;cursor:pointer;font-size:16px;font-weight:bold;transition:all 0.3s ease;box-shadow:0 5px 15px rgba(255,65,108,0.3);}
        .icon:hover{transform:scale(1.15) rotate(5deg);box-shadow:0 10px 25px rgba(255,65,108,0.5);}
        .remove{background:linear-gradient(135deg,#444,#555)!important;}
        .remove:hover{background:linear-gradient(135deg,#ff4444,#ff6666)!important;transform:scale(1.15) rotate(-5deg)!important;}

        /* ================= FOOTER ================= */
        footer{background:linear-gradient(180deg,rgba(15,15,15,0.95),rgba(5,5,5,0.9));padding:30px;text-align:center;font-size:14px;color:#bbb;}
        footer p{max-width:1000px;margin:auto;line-height:1.7;}

        /* ================= MOBILE RESPONSIVE ================= */
        @media (max-width: 1000px) {
  body {
    flex-direction: row;  /* Keep side-by-side */
  }
  .sidebar {
    width: 280px;  /* Fixed width */
    flex-direction: column !important;
    padding: 25px 20px;
    flex-shrink: 0;
  }
  .sidebar h2 {
    display: block;  /* Show title */
  }
  /* Hide sidebar on very small screens */
  @media (max-width: 600px) {
    .sidebar {
      transform: translateX(-100%);
      position: fixed;
      height: 100vh;
      z-index: 100;
      transition: transform 0.3s ease;
    }
    .sidebar.open {
      transform: translateX(0);
    }
  }
}

        @media(max-width:600px){
            .content-area,
.sidebar {
  -webkit-overflow-scrolling: touch;
}

            #home h1{font-size:36px;}
            .grid{grid-template-columns:repeat(2,1fr);}
            .card img{height:200px;}
            .home-buttons{flex-direction:column;align-items:center;}
        }

        /* ================= ANIMATIONS ================= */
        .loading{opacity:0;animation:fadeIn 0.6s ease forwards;}
        @keyframes fadeIn{to{opacity:1;transform:translateY(0);}}
        .skeleton{background:linear-gradient(90deg,#1a1a1a 25%,#2a2a2a 50%,#1a1a1a 75%);background-size:200% 100%;animation:skeleton 1.5s infinite;}
        @keyframes skeleton{0%{background-position:200% 0;}100%{background-position:-200% 0;}}
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <!-- ========== SIDEBAR - UPDATED ========== -->
    <div class="sidebar">
        <h2>OtakuLog</h2>
        <div class="profile-mini" id="profileMini"><!-- Dynamic profile --></div>
        <button class="active" onclick="showPage('home',this)">ğŸ  Home</button>
        <button onclick="showPage('anime',this)">ğŸ“º Anime</button>
        <button onclick="showPage('manga',this)">ğŸ“š Manga</button>
        <button onclick="showPage('recipes',this)">ğŸœ Recipes</button>
        <button onclick="showPage('suggestions',this)">ğŸ’¡ Suggestions</button>
        <button onclick="showPage('news',this)">ğŸ“° News</button>
        <button onclick="showPage('stats',this)">ğŸ“Š Stats</button>
        <button onclick="showPage('about',this)">â„¹ï¸ About</button>
        <button onclick="fact()">âœï¸ Facts</button>
        <button onclick="toggleTheme()">ğŸŒ™ Theme</button>
    </div>

    <div class="main">
        <div class="main-header">
            <h2 id="pageTitle">Welcome to OtakuLog</h2>
        </div>

        <div class="content-area">
            <!-- ========== HOME PAGE - CLEAN ========== -->
            <section id="home" class="active">
                <h1>OtakuLog</h1>
                <p>Your ultimate anime & manga tracking platform. Discover, organize, and explore thousands of stories with personalized recommendations and beautiful visualizations.</p>
                <div class="home-buttons">
                    <button onclick="showPage('anime',document.querySelectorAll('.sidebar button')[2])">Explore Anime</button>
                    <button onclick="showPage('manga',document.querySelectorAll('.sidebar button')[3])">Explore Manga</button>
                    <button onclick="showPage('recipes',document.querySelectorAll('.sidebar button')[4])">ğŸœ Food Recipes</button>
                </div>
            </section>

            <!-- ================= ANIME SECTION ================= -->
            <section id="anime">
                <div class="search-center">
                    <input id="animeInput" placeholder="Search anime by title, genre, or studio...">
                    <button class="icon" onclick="searchAnime()">ğŸ”</button>
                    <div class="suggested">
                        <span onclick="genreAnime(30)">âš½ Sports</span>
                        <span onclick="genreAnime(62)">ğŸŒŒ Isekai</span>
                        <span onclick="genreAnime(22)">ğŸ’• Romance</span>
                        <span onclick="genreAnime(10)">ğŸª„ Fantasy</span>
                        <span onclick="topAnime()">â­ Popular</span>
                        <span onclick="studioAnime('MAPPA')">MAPPA</span>
                        <span onclick="filterByEpisodesRange(1,12)">ğŸ“º â‰¤12 EP</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:10px;margin-top:10px;">
                        <input id="epInput" type="number" placeholder="Max episodes" style="padding:12px 16px;width:200px;border-radius:8px;border:1px solid rgba(255,65,108,0.3);background:rgba(26,26,26,0.8);color:white;">
                        <button class="icon" onclick="searchByEpisodeCount()">ğŸ¯</button>
                    </div>
                </div>
                <h3>Search Results</h3>
                <div id="animeGrid" class="grid"></div>
                <h3>âœ… Watched</h3>
                <div id="watchedGrid" class="grid"></div>
                <h3>â• Plan to Watch</h3>
                <div id="planGrid" class="grid"></div>
            </section>

            <!-- ================= MANGA SECTION ================= -->
            <section id="manga">
                <div class="search-center">
                    <input id="mangaInput" placeholder="Search manga, manhwa, manhua...">
                    <button class="icon" onclick="searchManga()">ğŸ”</button>
                    <div class="suggested">
                        <span onclick="mangaGenre(22)">ğŸ’• Romance</span>
                        <span onclick="mangaGenre(10)">ğŸª„ Fantasy</span>
                        <span onclick="searchMangaType('manhwa')">ğŸ‡°ğŸ‡· Korean</span>
                        <span onclick="searchMangaType('manhua')">ğŸ‡¨ğŸ‡³ Chinese</span>
                        <span onclick="topManga()">â­ Popular</span>
                    </div>
                </div>
                <h3>Search Results</h3>
                <div id="mangaGrid" class="grid"></div>
                <h3>ğŸ“– Reading</h3>
                <div id="readingGrid" class="grid"></div>
                <h3>âœ… Read</h3>
                <div id="readGrid" class="grid"></div>
                <h3>â• Plan to Read</h3>
                <div id="planReadGrid" class="grid"></div>
            </section>

            <!-- ================= RECIPES SECTION - NEW ================= -->
            <section id="recipes">
                <h2>ğŸœ Anime Food Recipes</h2>
                <p style="color:#ccc;font-size:15px;max-width:800px;margin:0 auto 30px;">Recreate iconic dishes from your favorite anime series</p>
                <div id="recipesGrid" class="grid"></div>
            </section>

            <!-- ================= SUGGESTIONS SECTION - UPDATED ================= -->
            <section id="suggestions">
                <h2>ğŸ“± Where to Watch</h2>
                <div class="grid">
                    <div class="card">
                        <h4>ğŸŒŸ Crunchyroll</h4>
                        <p>Official anime streaming with simulcasts and premium library</p>
                        <div class="buttons">
                            <a href="https://www.crunchyroll.com" target="_blank"><button class="icon">ğŸŒ</button></a>
                        </div>
                    </div>
                    <div class="card">
                        <h4>ğŸ“º Netflix Anime</h4>
                        <p>High-quality originals and licensed anime series</p>
                        <div class="buttons">
                            <a href="https://www.netflix.com/browse/genre/7424" target="_blank"><button class="icon">ğŸŒ</button></a>
                        </div>
                    </div>
                    <div class="card">
                        <h4>ğŸ›’ Amazon Prime Video</h4>
                        <p>Wide anime selection including exclusives and dubs</p>
                        <div class="buttons">
                            <a href="https://www.primevideo.com" target="_blank"><button class="icon">ğŸŒ</button></a>
                        </div>
                    </div>
                    <div class="card">
                        <h4>ğŸ“¡ JioCinema</h4>
                        <p>Indian streaming platform with popular anime titles</p>
                        <div class="buttons">
                            <a href="https://www.jiocinema.com" target="_blank"><button class="icon">ğŸŒ</button></a>
                        </div>
                    </div>
                    <div class="card">
                        <h4>ğŸ“– Manga Plus</h4>
                        <p>Official Shueisha platform with simultaneous releases</p>
                        <div class="buttons">
                            <a href="https://mangaplus.shueisha.co.jp" target="_blank"><button class="icon">ğŸ“š</button></a>
                        </div>
                    </div>
                </div>

                <h2>âœˆï¸ Travel Spots</h2>
                <div id="travelGrid" class="grid"></div>
            </section>
            <!-- ================= NEWS SECTION ================= -->
            <section id="news">
                <h2>ğŸ“° Latest Anime News</h2>
                <p style="color:#ccc;font-size:15px;max-width:800px;margin:0 auto 30px;">Updates from the anime industry with real-time data</p>
                <div id="animeNews" class="grid"></div>
                <h2>ğŸ“º Currently Airing</h2>
                <div id="airingGrid" class="grid"></div>
                <h2>ğŸ”¥ Upcoming Releases</h2>
                <div id="upcomingGrid" class="grid"></div>
            </section>

            <!-- ================= STATS DASHBOARD ================= -->
            <section id="stats">
                <h2>ğŸ“Š Your Stats</h2>
                <div class="grid">
                    <div class="card" style="text-align:center;">
                        <h4>ğŸ“º Anime Watched</h4><p id="statWatched" style="font-size:32px;color:#ff416c;font-weight:700;margin:10px 0;">0</p>
                    </div>
                    <div class="card" style="text-align:center;">
                        <h4>â• Plan to Watch</h4><p id="statPlan" style="font-size:32px;color:#ff416c;font-weight:700;margin:10px 0;">0</p>
                    </div>
                    <div class="card" style="text-align:center;">
                        <h4>ğŸ“– Manga Reading</h4><p id="statReading" style="font-size:32px;color:#ff416c;font-weight:700;margin:10px 0;">0</p>
                    </div>
                    <div class="card" style="text-align:center;">
                        <h4>âœ… Manga Read</h4><p id="statRead" style="font-size:32px;color:#ff416c;font-weight:700;margin:10px 0;">0</p>
                    </div>
                </div>
            </section>

             <!-- ================= FACTS SECTION ================= -->
        <section id="facts">
            <h2>ğŸŒŸ Anime Facts </h2>

                <div class="card">
                    <h4>ğŸ‡®ğŸ‡³ India Anime Watch</h4>
                    <p>Indian manga & anime projects to support!</p>
                    <ul style="text-align:left;padding-left:20px;color:#ccc;">
                        <li><b>Kabir</b> - India's first anime (upcoming)</li>
                        <li><b>Ganga</b> - Mythological manga series</li>
                        <li><b>Ramayana 3D</b> - Animated epic</li>
                        <li><b>Chhota Bheem</b> - Global anime-style hit</li>
                        <li><b>Karmachakra</b> indian anime </li>
                        <li><b>https://cosmics.co.in/?srsltid=AfmBOooMBPtShfYO-je_umHhkWAhWhxlvZrzAj3DrnAQyGxEIPlJPfBI</b> - Indian Manga/ comics</li>
                        li><b>https://www.qissacomics.com/</b> - indian sports manga</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- ================= ABOUT SECTION ================= -->
        <section id="about">
            <div class="about-content">
                <div class="about-card">
                    <h2>ğŸ‘‹ Welcome to OtakuLog</h2>
                    <p style="font-size:18px;color:#ccc;line-height:1.7;">
                        Built by <strong>Rayaan</strong> - A curious creator exploring anime, storytelling, and web developmentâ€”one project at a time from Bengaluru,Karnataka. 
                        I created OtakuLog to solve my own problem: keeping track of my endless anime & manga watchlist!
                        Iâ€™m an anime enthusiast who wanted to build an interactive web experiences. I like experimenting with ideas, learning new concepts, and improving through hands-on projects. OtakuLog is a personal project where I combined frontend development, design, and anime culture into a single evolving platform.
                    </p>
                </div>

                <div class="about-card">
                    <h3>ğŸš€ How OtakuLog Works</h3>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>ğŸ“± One-Click Tracking</h4>
                            <p>Add to Watched/Plan with single tap</p>
                        </div>
                        <div class="feature-card">
                            <h4>ğŸ§  Smart Recommendations</h4>
                            <p>AI analyzes your taste for perfect suggestions</p>
                        </div>
                        <div class="feature-card">
                            <h4>ğŸ® Interactive Games</h4>
                            <p>Test your otaku knowledge daily</p>
                        </div>
                        <div class="feature-card">
                            <h4>ğŸœ Real Recipes</h4>
                            <p>Cook anime food in your kitchen</p>
                        </div>
                    </div>
                </div>

                <div class="about-card">
                    <h3>ğŸ“ˆ Coming Soon</h3>
                    <ul style="color:#ccc;font-size:16px;">
                        <li>ğŸ›ï¸ <strong>Anime Merch Store</strong> - Official figures, posters & apparel</li>
                        <li>ğŸ­ <strong>Comic-Con Calendar</strong> - India cosplay events</li>
                        <li>ğŸ˜Š <strong>Mood-Based Suggestions</strong> - Feeling sad? Watch this!</li>
                        <li>ğŸ¤– <strong>AI Character Generator</strong> - Create your waifu/husbando or yourself</li>
                        <li>ğŸ¤– <strong>This or That Anime</strong> - chose your fav anime</li>
                       <li>ğŸ¤– <strong>Anime quiz/ guess the character</strong> - whos that guy/girl?</li>
                    </ul>
                </div>

                <div class="about-card" style="text-align:center;">
                    <h3>ğŸ“² Connect With Me</h3>
                    <p style="font-size:20px;margin:20px 0;">
                        <a href="https://instagram.com/the_rayaan_k" target="_blank" style="color:#ff416c;font-weight:700;text-decoration:none;">
                            Instagram: @the_rayaan_k âœ¨
                        </a>
                    </p>
                    <p style="color:#aaa;">Made with â¤ï¸ in Bangalore, India</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        // ================= GLOBAL STATE =================
        let animeData=[], mangaData=[];
        let watched=[], plan=[], reading=[], read=[], planRead=[];
        let store = {profile:{username:"Otaku",avatar:"ğŸ¦Š"}, anime:{watched:[],plan:[]}, manga:{reading:[],read:[],plan:[]}};
        const STORAGE_KEY = "otakulog-data-v2";
        const JIKAN_BASE = "https://api.jikan.moe/v4";

        // ================= RECIPES & TRAVEL DATA =================
        const animeRecipes = [
            {title:"ğŸ² Sanji's Okonomiyaki", img:"https://via.placeholder.com/220x280/FF416C/FFFFFF?text=Okonomiyaki", desc:"One Piece classic street food", url:"https://itadakimasuanime.wordpress.com/recipes/okonomiyaki/"},
            {title:"ğŸœ Tanjiro's Udon", img:"https://via.placeholder.com/220x280/FF6B9D/FFFFFF?text=Udon", desc:"Demon Slayer comfort noodles", url:"https://itadakimasuanime.wordpress.com/recipes/udon/"},
            {title:"ğŸ™ Onigiri", img:"https://via.placeholder.com/220x280/FF416C/FFFFFF?text=Onigiri", desc:"PokÃ©mon & Naruto rice balls", url:"https://itadakimasuanime.wordpress.com/recipes/onigiri/"},
            {title:"ğŸ¡ Mochi", img:"https://via.placeholder.com/220x280/FF4B6D/FFFFFF?text=Mochi", desc:"Spirited Away sweet treat", url:"https://itadakimasuanime.wordpress.com/recipes/mochi/"},
            {title:"ğŸ– Yakitori", img:"https://via.placeholder.com/220x280/FF6B9D/FFFFFF?text=Yakitori", desc:"Grilled chicken skewers", url:"https://itadakimasuanime.wordpress.com/recipes/yakitori/"},
            {title:"ğŸ® Purin", img:"https://via.placeholder.com/220x280/FF416C/FFFFFF?text=Purin", desc:"Toradora creamy pudding", url:"https://itadakimasuanime.wordpress.com/recipes/purin/"}
        ];

        const animeTravelSpots = [
            {title:"ğŸ—¼ Tokyo Tower (Attack on Titan)", img:"https://via.placeholder.com/220x280/4ECDC4/FFFFFF?text=Tokyo+Tower", desc:"Iconic orange tower in Minato", url:"https://www.tokyotower.co.jp/en/"},
            {title:"ğŸŒ¸ Shibuya Crossing (Various)", img:"https://via.placeholder.com/220x280/44A08D/FFFFFF?text=Shibuya", desc:"World's busiest intersection", url:"https://www.shibuya.sc/"},
            {title:"â›©ï¸ Fushimi Inari (Inuyasha)", img:"https://via.placeholder.com/220x280/4ECDC4/FFFFFF?text=Fushimi+Inari", desc:"1000 red torii gates", url:"https://inari.jp/en/"},
            {title:"ğŸ¯ Himeji Castle (Various)", img:"https://via.placeholder.com/220x280/44A08D/FFFFFF?text=Himeji", desc:"Japan's most beautiful castle", url:"https://www.himejicastle.jp/en/"},
            {title:"ğŸŒŠ Itsukushima Shrine (Spirited Away)", img:"https://via.placeholder.com/220x280/4ECDC4/FFFFFF?text=Miyajima", desc:"Floating torii gate", url:"https://www.miyajima.or.jp/english/"},
            {title:"ğŸš… Akihabara (Lucky Star)", img:"https://via.placeholder.com/220x280/44A08D/FFFFFF?text=Akihabara", desc:"Anime & electronics district", url:"https://akihabara-trip.jp/"}
        ];

        // ================= STORAGE SYSTEM =================
        function loadStore(){
            const saved = localStorage.getItem(STORAGE_KEY);
            if(saved) store = JSON.parse(saved);
            watched = store.anime.watched || [];
            plan = store.anime.plan || [];
            reading = store.manga.reading || [];
            read = store.manga.read || [];
            planRead = store.manga.plan || [];
            return store;
        }
        function saveStore(){
            store.anime.watched = watched;
            store.anime.plan = plan;
            store.manga.reading = reading;
            store.manga.read = read;
            store.manga.plan = planRead;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(store));
        }

        // ================= PAGE NAVIGATION - FIXED =================
        function showPage(id, btn){
            document.querySelectorAll("section").forEach(sec => {
                sec.style.display = "none";
                sec.classList.remove("active","loading");
            });
            const target = document.getElementById(id);
            if(target){
                target.style.display = "block";
                target.classList.add("active","loading");
                setTimeout(()=>target.classList.remove("loading"), 600);
            }
            document.querySelectorAll(".sidebar button").forEach(b => b.classList.remove("active"));
            if(btn) btn.classList.add("active");
            document.getElementById("pageTitle").textContent = btn ? btn.textContent : "OtakuLog";
            
            if(id === "anime") loadAnimeHome();
            if(id === "manga") loadMangaHome();
            if(id === "news") loadNews();
            if(id === "recipes") renderRecipes();
            if(id === "suggestions") renderTravelSpots();
        }

        // ================= RENDER FUNCTIONS =================
        function renderAnime(grid, data, actions=false, source="anime"){
            grid.innerHTML = data.map((a,i) => `
                <div class="card">
                    <img src="${a.images?.jpg?.image_url || '/placeholder.svg'}" alt="${a.title}" loading="lazy">
                    <h4>${a.title}</h4>
                    <p>${a.synopsis?.substring(0,120) || "No description available."}${a.synopsis && a.synopsis.length > 120 ? "..." : ""}</p>
                    ${actions ? `
                        <div class="buttons">
                            <button class="icon" onclick="addWatched(${i})" title="Mark as Watched">âœ”</button>
                            <button class="icon" onclick="addPlan(${i})" title="Plan to Watch">â•</button>
                        </div>
                    ` : ""}
                    ${source !== "anime" ? `
                        <div class="buttons">
                            <button class="icon remove" onclick="removeItem('${source}',${i})" title="Remove">ğŸ—‘</button>
                        </div>
                    ` : ""}
                </div>
            `).join("");
        }

        function renderManga(grid, data, source){
            grid.innerHTML = data.map((m,i) => `
                <div class="card">
                    <img src="${m.images?.jpg?.image_url || '/placeholder.svg'}" alt="${m.title}" loading="lazy">
                    <h4>${m.title}</h4>
                    <p>${m.synopsis?.substring(0,120) || "No description available."}${m.synopsis && m.synopsis.length > 120 ? "..." : ""}</p>
                    ${source === "search" ? `
                        <div class="buttons">
                            <button class="icon" onclick="addReading(${i})" title="Reading">ğŸ“–</button>
                            <button class="icon" onclick="addRead(${i})" title="Read">âœ”</button>
                            <button class="icon" onclick="addPlanRead(${i})" title="Plan to Read">â•</button>
                        </div>
                    ` : ""}
                    ${source !== "search" ? `
                        <div class="buttons">
                            <button class="icon remove" onclick="removeItem('${source}',${i})" title="Remove">ğŸ—‘</button>
                        </div>
                    ` : ""}
                </div>
            `).join("");
        }

        // ================= NEW FEATURES =================
        function renderRecipes(){
            const grid = document.getElementById("recipesGrid");
            grid.innerHTML = animeRecipes.map((r,i) => `
                <div class="card">
                    <img src="${r.img}" alt="${r.title}" loading="lazy">
                    <h4>${r.title}</h4>
                    <p>${r.desc}</p>
                    <div class="buttons">
                        <a href="${r.url}" target="_blank"><button class="icon">ğŸ³</button></a>
                        <button class="icon remove" onclick="animeRecipes.splice(${i},1);renderRecipes();" title="Remove">ğŸ—‘</button>
                    </div>
                </div>
            `).join("");
        }

        function renderTravelSpots(){
            const grid = document.getElementById("travelGrid");
            grid.innerHTML = animeTravelSpots.map((spot,i) => `
                <div class="card">
                    <img src="${spot.img}" alt="${spot.title}" loading="lazy">
                    <h4>${spot.title}</h4>
                    <p>${spot.desc}</p>
                    <div class="buttons">
                        <a href="${spot.url}" target="_blank"><button class="icon">ğŸ—ºï¸</button></a>
                    </div>
                </div>
            `).join("");
        }

        // ================= LIST MANAGEMENT =================
        function addWatched(i){if(!watched.some(x => x.mal_id === animeData[i].mal_id)) watched.push(animeData[i]);update();}
        function addPlan(i){if(!plan.some(x => x.mal_id === animeData[i].mal_id)) plan.push(animeData[i]);update();}
        function addReading(i){if(!reading.some(x => x.mal_id === mangaData[i].mal_id)) reading.push(mangaData[i]);update();}
        function addRead(i){if(!read.some(x => x.mal_id === mangaData[i].mal_id)) read.push(mangaData[i]);update();}
        function addPlanRead(i){if(!planRead.some(x => x.mal_id === mangaData[i].mal_id)) planRead.push(mangaData[i]);update();}
        function removeItem(type,i){
            if(type === "watched") watched.splice(i,1);
            if(type === "plan") plan.splice(i,1);
            if(type === "reading") reading.splice(i,1);
            if(type === "read") read.splice(i,1);
            if(type === "planRead") planRead.splice(i,1);
            update();
        }

        function update(){
            renderAnime(watchedGrid, watched, false, "watched");
            renderAnime(planGrid, plan, false, "plan");
            renderManga(readingGrid, reading, "reading");
            renderManga(readGrid, read, "read");
            renderManga(planReadGrid, planRead, "planRead");
            updateStats();
            saveStore();
        }

        function updateStats(){
            document.getElementById("statWatched").textContent = watched.length;
            document.getElementById("statPlan").textContent = plan.length;
            document.getElementById("statReading").textContent = reading.length;
            document.getElementById("statRead").textContent = read.length;
        }

        // ================= API FUNCTIONS =================
        async function safeFetch(url){
            try{
                const response = await fetch(url);
                if(!response.ok) throw new Error('API error');
                return await response.json();
            }catch(e){
                console.error('API Error:', e);
                return {data:[]};
            }
        }

        // Anime functions (keeping existing functionality)
        async function searchAnime(){const query = document.getElementById("animeInput").value.trim();if(!query) return topAnime();const data = await safeFetch(`${JIKAN_BASE}/anime?q=${encodeURIComponent(query)}&limit=16`);animeData = data.data || [];renderAnime(animeGrid, animeData, true);}
        async function genreAnime(id){const data = await safeFetch(`${JIKAN_BASE}/anime?genres=${id}&limit=16`);animeData = data.data || [];document.getElementById("animeInput").value = `Genre: ${id}`;renderAnime(animeGrid, animeData, true);}
        async function studioAnime(name){const data = await safeFetch(`${JIKAN_BASE}/anime?q=${encodeURIComponent(name)}&limit=16`);animeData = data.data || [];document.getElementById("animeInput").value = name;renderAnime(animeGrid, animeData, true);}
        async function topAnime(){const data = await safeFetch(`${JIKAN_BASE}/top/anime?limit=16`);animeData = data.data || [];document.getElementById("animeInput").value = "Top Anime";renderAnime(animeGrid, animeData, true);}
        async function loadAnimeHome(){if(!animeData.length) await topAnime();}

        // Manga functions
        async function searchManga(){const query = document.getElementById("mangaInput").value.trim();if(!query) return topManga();const data = await safeFetch(`${JIKAN_BASE}/manga?q=${encodeURIComponent(query)}&limit=16`);mangaData = data.data || [];renderManga(mangaGrid, mangaData, "search");}
        async function mangaGenre(id){const data = await safeFetch(`${JIKAN_BASE}/manga?genres=${id}&limit=16`);mangaData = data.data || [];document.getElementById("mangaInput").value = `Genre: ${id}`;renderManga(mangaGrid, mangaData, "search");}
        async function topManga(){const data = await safeFetch(`${JIKAN_BASE}/top/manga?limit=16`);mangaData = data.data || [];document.getElementById("mangaInput").value = "Top Manga";renderManga(mangaGrid, mangaData, "search");}
        async function searchMangaType(type){const data = await safeFetch(`${JIKAN_BASE}/manga?q=${encodeURIComponent(type)}&limit=16`);mangaData = data.data || [];document.getElementById("mangaInput").value = type;renderManga(mangaGrid, mangaData, "search");}
        async function loadMangaHome(){if(!mangaData.length) await topManga();}

        async function loadNews(){
            const [newsRes, airingRes, upcomingRes] = await Promise.all([
                safeFetch(`${JIKAN_BASE}/news?limit=6`),
                safeFetch(`${JIKAN_BASE}/seasons/now?limit=16`),
                safeFetch(`${JIKAN_BASE}/seasons/upcoming?limit=16`)
            ]);
            document.getElementById("animeNews").innerHTML = (newsRes.data || []).slice(0,6).map(n => `
                <div class="card">
                    <h4>${n.title}</h4>
                    <p style="font-size:13px;color:#ccc">${n.excerpt?.substring(0,100) || "Click to read more..."}</p>
                    <div class="buttons">
                        <a href="${n.url}" target="_blank"><button class="icon">ğŸ“°</button></a>
                    </div>
                </div>
            `).join("");
            renderAnime(document.getElementById("airingGrid"), airingRes.data || [], false);
            renderAnime(document.getElementById("upcomingGrid"), upcomingRes.data || [], false);
        }

        // ================= PROFILE SYSTEM - FIXED =================
        const avatarOptions = ["ğŸ¦Š","ğŸº","ğŸ‰","ğŸ¦","ğŸ¼","ğŸ¦…","ğŸ±","ğŸ²","ğŸ‘¹","ğŸ‘º"];
        
        function renderProfiles(){
            const profileMini = document.getElementById("profileMini");
            profileMini.innerHTML = `
                <div class="avatar">${store.profile.avatar}</div>
                <h4>${store.profile.username}</h4>
                <button onclick="editProfileFromSidebar()">âœï¸ Edit</button>
            `;
        }

        function editProfileFromSidebar(){
            const name = prompt("Enter your username:", store.profile.username);
            if(name && name.trim()){
                store.profile.username = name.trim();
                const avatar = prompt("Enter avatar emoji (or press cancel to keep current):", store.profile.avatar);
                if(avatar) store.profile.avatar = avatar;
                saveStore();
                renderProfiles();
            }
        }

        // ================= THEME SYSTEM =================
        function toggleTheme(){
            const root = document.documentElement;
            const current = localStorage.getItem("theme") || "dark";
            const next = current === "dark" ? "light" : "dark";
            localStorage.setItem("theme", next);
            applyTheme();
        }

        function applyTheme(){
            const theme = localStorage.getItem("theme") || "dark";
            if(theme === "light"){
                document.body.style.background = "linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)";
                document.body.style.color = "#2d3436";
            }else{
                document.body.style.background = "#0a0a0a";
                document.body.style.color = "#fff";
            }
        }

        // ================= EVENT LISTENERS =================
        document.addEventListener("DOMContentLoaded", ()=>{
            loadStore();
            renderProfiles();
            update();
            showPage("home");
            applyTheme();
            
            document.getElementById("animeInput").addEventListener("keypress", e => {if(e.key === "Enter") searchAnime();});
            document.getElementById("mangaInput").addEventListener("keypress", e => {if(e.key === "Enter") searchManga();});
        });
    </script>
</body>
</html>


