<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OtakuLog</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: #0b0b0b;
    color: white;
    display: flex;
}

/* SIDEBAR */
.sidebar {
    width: 220px;
    background: #111;
    height: 100vh;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.sidebar h2 {
    text-align: center;
    color: crimson;
}

.sidebar button {
    background: none;
    border: none;
    color: white;
    padding: 10px;
    text-align: left;
    cursor: pointer;
    font-size: 15px;
}

.sidebar button.active,
.sidebar button:hover {
    background: crimson;
}

/* MAIN */
.main {
    flex: 1;
    padding: 25px;
    overflow-y: auto;
}

section { display: none; }
section.active { display: block; }

/* SEARCH */
.search-center {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}

.search-center input {
    width: 320px;
    padding: 12px;
    background: #1a1a1a;
    border: none;
    color: white;
    border-radius: 6px;
}

/* SUGGESTIONS */
.suggested {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
}

.suggested span {
    background: #222;
    padding: 6px 12px;
    border-radius: 16px;
    font-size: 13px;
    cursor: pointer;
}

.suggested span:hover {
    background: crimson;
}

/* GRID */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 16px;
    margin-top: 25px;
}

/* CARD */
.card {
    background: #1a1a1a;
    border-radius: 10px;
    overflow: hidden;
    text-align: center;
}

.card img {
    width: 100%;
    height: 250px;
    object-fit: cover;
}

.card p {
    font-size: 14px;
    padding: 6px;
}

/* ICON */
.icon {
    width: 36px;
    height: 36px;
    margin: 4px;
    border-radius: 50%;
    border: none;
    background: crimson;
    color: white;
    font-size: 16px;
    cursor: pointer;
}

/* FOOTER */
footer {
    margin-top: 50px;
    padding: 20px;
    background: #111;
    text-align: center;
    font-size: 14px;
}

/* MOBILE */
@media (max-width: 900px) {
    body { flex-direction: column; }

    .sidebar {
        width: 100%;
        height: auto;
        flex-direction: row;
        justify-content: space-around;
        padding: 10px;
    }

    .sidebar h2 { display: none; }
}

@media (max-width: 600px) {
    .search-center input { width: 100%; }
    .grid { grid-template-columns: repeat(2, 1fr); }
    .card img { height: 180px; }
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h2>OtakuLog</h2>
    <button class="active" onclick="showPage('anime',this)">Anime</button>
    <button onclick="showPage('manga',this)">Manga</button>
    <button onclick="showPage('news',this)">News</button>
</div>

<div class="main">

<!-- ANIME -->
<section id="anime" class="active">
    <div class="search-center">
        <input id="animeInput" placeholder="Search anime...">
        <button class="icon" onclick="searchAnime()">üîç</button>

        <div class="suggested">
            <span onclick="genreAnime(8)">Drama</span>
            <span onclick="genreAnime(36)">Slice of Life</span>
            <span onclick="genreAnime(14)">Horror</span>
            <span onclick="genreAnime(1)">Romance</span>
            <span onclick="genreAnime(41)">Thriller</span>
            <span onclick="genreAnime(23)">School</span>
            <span onclick="topAnime()">Popular</span>
            <span onclick="studioAnime(21)">MAPPA</span>
            <span onclick="studioAnime(11)">Madhouse</span>
            <span onclick="studioAnime(2)">Kyoto Animation</span>
        </div>
    </div>

    <div id="animeGrid" class="grid"></div>
</section>

<!-- MANGA -->
<section id="manga">
    <div class="search-center">
        <input id="mangaInput" placeholder="Search manga...">
        <button class="icon" onclick="searchManga()">üîç</button>

        <div class="suggested">
            <span onclick="topManga()">Popular</span>
            <span onclick="mangaGenre(8)">Drama</span>
            <span onclick="mangaGenre(1)">Romance</span>
            <span onclick="mangaGenre(14)">Horror</span>
        </div>
    </div>

    <div id="mangaGrid" class="grid"></div>
</section>

<!-- NEWS -->
<section id="news">
    <h2>Upcoming Anime</h2>
    <div id="upcomingGrid" class="grid"></div>

    <h2>Currently Airing</h2>
    <div id="airingGrid" class="grid"></div>
</section>

<footer>
    <p><strong>Author:</strong> Rayaan K</p>
    <p><strong>Email:</strong> rayaan.3016@gmail.com</p>
</footer>

</div>

<script>
const animeGrid = document.getElementById("animeGrid");
const mangaGrid = document.getElementById("mangaGrid");

document.addEventListener("keydown", e => {
    if (e.key === "Enter") {
        if (document.activeElement.id === "animeInput") searchAnime();
        if (document.activeElement.id === "mangaInput") searchManga();
    }
});

function showPage(id, btn){
    document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    document.querySelectorAll(".sidebar button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
}

function render(grid, data){
    grid.innerHTML = data.map(a=>`
        <div class="card">
            <img src="${a.images.jpg.image_url}">
            <p>${a.title}</p>
        </div>`).join("");
}

async function searchAnime(){
    const q = animeInput.value;
    if(!q) return;
    const r = await fetch(`https://api.jikan.moe/v4/anime?q=${q}&limit=12`);
    render(animeGrid,(await r.json()).data);
}

async function genreAnime(id){
    const r = await fetch(`https://api.jikan.moe/v4/anime?genres=${id}&limit=12`);
    render(animeGrid,(await r.json()).data);
}

async function studioAnime(id){
    const r = await fetch(`https://api.jikan.moe/v4/anime?producers=${id}&limit=12`);
    render(animeGrid,(await r.json()).data);
}

async function topAnime(){
    const r = await fetch(`https://api.jikan.moe/v4/top/anime?limit=12`);
    render(animeGrid,(await r.json()).data);
}

async function searchManga(){
    const q = mangaInput.value;
    if(!q) return;
    const r = await fetch(`https://api.jikan.moe/v4/manga?q=${q}&limit=12`);
    render(mangaGrid,(await r.json()).data);
}

async function mangaGenre(id){
    const r = await fetch(`https://api.jikan.moe/v4/manga?genres=${id}&limit=12`);
    render(mangaGrid,(await r.json()).data);
}

async function topManga(){
    const r = await fetch(`https://api.jikan.moe/v4/top/manga?limit=12`);
    render(mangaGrid,(await r.json()).data);
}

async function loadNews(){
    const u = await fetch("https://api.jikan.moe/v4/seasons/upcoming?limit=12");
    const a = await fetch("https://api.jikan.moe/v4/seasons/now?limit=12");
    render(upcomingGrid,(await u.json()).data);
    render(airingGrid,(await a.json()).data);
}

topAnime();
topManga();
loadNews();
</script>

</body>
</html>
